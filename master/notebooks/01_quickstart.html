

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Quick start with TemplateFlow Client API &mdash; templateflow 0.7.2.dev31+g383766b9.d20210908 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visualisation of spatial resources with TemplateFlow" href="02_visualisation.html" />
    <link rel="prev" title="Examples" href="../examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> templateflow
          

          
          </a>

          
            
            
              <div class="version">
                dev (0.7.2.dev31)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Quick start with <em>TemplateFlow Client</em> API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Finding-templates">Finding templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Accessing-metadata">Accessing metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Accessing-data">Accessing data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Integrating-TemplateFlow-into-processing-workflows">Integrating <em>TemplateFlow</em> into processing workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#TemplateFlow-integration-with-fMRIPrep"><em>TemplateFlow</em> integration with <code class="docutils literal notranslate"><span class="pre">fMRIPrep</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#Obtaining-templates-for-registration">Obtaining templates for registration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Masks">Masks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Accessing-file-versions">Accessing file versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="02_visualisation.html">Visualisation of spatial resources with <em>TemplateFlow</em></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../datalad.html">DataLad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Library API (application program interface)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">What’s new</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">templateflow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../examples.html">Examples</a> &raquo;</li>
        
      <li>Quick start with <em>TemplateFlow Client</em> API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/notebooks/01_quickstart.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Quick-start-with-TemplateFlow-Client-API">
<h1>Quick start with <em>TemplateFlow Client</em> API<a class="headerlink" href="#Quick-start-with-TemplateFlow-Client-API" title="Permalink to this headline">¶</a></h1>
<p>This notebook showcases elementary functionality of the <em>TemplateFlow</em> API. We begin by importing the <em>TemplateFlow</em> Python client.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">templateflow</span>
<span class="kn">import</span> <span class="nn">templateflow.api</span> <span class="k">as</span> <span class="nn">tflow</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Using TemplateFlow Client version </span><span class="si">{</span><span class="n">templateflow</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Using TemplateFlow Client version 0.7.1
</pre></div></div>
</div>
<div class="section" id="Finding-templates">
<h2>Finding templates<a class="headerlink" href="#Finding-templates" title="Permalink to this headline">¶</a></h2>
<p>At the time of writing, there are 15 templates available in the <em>TemplateFlow Archive</em>. We can use the <code class="docutils literal notranslate"><span class="pre">templates()</span></code> function to obtain the unique resource identifiers for all currently available templates.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">templates</span> <span class="o">=</span> <span class="n">tflow</span><span class="o">.</span><span class="n">templates</span><span class="p">()</span>

<span class="c1"># Print template identifiers</span>
<span class="n">ident_fmt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">templates</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">templates</span><span class="p">)</span><span class="si">}</span><span class="s2"> templates:</span><span class="se">\n</span><span class="s2">-------------------</span><span class="se">\n</span><span class="si">{</span><span class="n">ident_fmt</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
16 templates:
-------------------
Fischer344
MNI152Lin
MNI152NLin2009cAsym
MNI152NLin2009cSym
MNI152NLin6Asym
MNI152NLin6Sym
MNIInfant
MNIPediatricAsym
NKI
OASIS30ANTs
PNC
RESILIENT
UNCInfant
WHS
fsLR
fsaverage
</pre></div></div>
</div>
</div>
<div class="section" id="Accessing-metadata">
<h2>Accessing metadata<a class="headerlink" href="#Accessing-metadata" title="Permalink to this headline">¶</a></h2>
<p>We can query metadata associated with individual data files (e.g., a volume or a surface) or general metadata of the template. For example, the method <code class="docutils literal notranslate"><span class="pre">get_metadata(&lt;template_id&gt;)</span></code> returns the general metadata as a dictionary:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Get the full, general metadata dictionary for the Fischer344 rodent template</span>
<span class="n">tflow</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;Fischer344&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;Authors&#39;: [&#39;Goerzen, D&#39;,
  &#39;Fowler, C&#39;,
  &#39;Devenyi, GA&#39;,
  &#39;Germann, J&#39;,
  &#39;Madularu, D&#39;,
  &#39;Chakravarty, MM&#39;,
  &#39;Near, J&#39;],
 &#39;BIDSVersion&#39;: &#39;1.1.0&#39;,
 &#39;Curators&#39;: [&#39;MacNicol E&#39;, &#39;Esteban O&#39;],
 &#39;Identifier&#39;: &#39;Fischer344&#39;,
 &#39;License&#39;: &#39;CC-by-nc-sa-4.0 International&#39;,
 &#39;Name&#39;: &#39;MRI-Derived Neuroanatomical Atlas of the Fischer 344 Rat Brain&#39;,
 &#39;ReferencesAndLinks&#39;: [&#39;https://doi.org/10.5281/zenodo.3555555&#39;,
  &#39;https://doi.org/10.1038/s41598-020-63965-x&#39;],
 &#39;TemplateFlowVersion&#39;: &#39;1.0.0&#39;}
</pre></div></div>
</div>
<p>Accordingly, to obtain the usage license for any template, we can select the relevant field from the template’s metadata dictionary.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Get the usage license for the OASIS30ANTs template</span>
<span class="n">tflow</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;OASIS30ANTs&#39;</span><span class="p">)[</span><span class="s1">&#39;License&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;CC BY 4.0&#39;
</pre></div></div>
</div>
<p>Similarly, we can compile desired metadata from all templates. Below, we retrieve for each template its full name, the list of contributing authors, and the usage license.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">metadata_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Authors&#39;</span><span class="p">,</span> <span class="s1">&#39;License&#39;</span><span class="p">]</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">col</span><span class="p">:</span> <span class="p">[</span><span class="n">tflow</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">tpl</span><span class="p">)[</span><span class="n">col</span><span class="p">]</span> <span class="k">for</span> <span class="n">tpl</span> <span class="ow">in</span> <span class="n">templates</span><span class="p">]</span>
              <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">metadata_fields</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="n">templates</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Authors</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Fischer344</td>
      <td>MRI-Derived Neuroanatomical Atlas of the Fisch...</td>
      <td>[Goerzen, D, Fowler, C, Devenyi, GA, Germann, ...</td>
      <td>CC-by-nc-sa-4.0 International</td>
    </tr>
    <tr>
      <td>MNI152Lin</td>
      <td>Linear ICBM Average Brain (ICBM152) Stereotaxi...</td>
      <td>[Evans AC, Fox PT, Lancaster J, Zilles K, Wood...</td>
      <td>See LICENSE file</td>
    </tr>
    <tr>
      <td>MNI152NLin2009cAsym</td>
      <td>ICBM 152 Nonlinear Asymmetrical template versi...</td>
      <td>[Fonov V, Evans AC, Botteron K, Almli CR, McKi...</td>
      <td>See LICENSE file</td>
    </tr>
    <tr>
      <td>MNI152NLin2009cSym</td>
      <td>ICBM 152 Nonlinear Symmetrical template versio...</td>
      <td>[Fonov V, Evans AC, Botteron K, Almli CR, McKi...</td>
      <td>See LICENSE file</td>
    </tr>
    <tr>
      <td>MNI152NLin6Asym</td>
      <td>FSL's MNI ICBM 152 non-linear 6th Generation A...</td>
      <td>[Janke AL]</td>
      <td>See LICENSE file</td>
    </tr>
    <tr>
      <td>MNI152NLin6Sym</td>
      <td>ICBM 152 non-linear 6th Generation Symmetric A...</td>
      <td>[Grabner G, Janke AL, Budge MM, Smith D, Prues...</td>
      <td>See LICENSE file</td>
    </tr>
    <tr>
      <td>MNIInfant</td>
      <td>MNI Unbiased nonlinear Infant Atlases 0-4.5yr.</td>
      <td>[Fonov V, Evans AC, Botteron K, Almli CR, McKi...</td>
      <td>See LICENSE file</td>
    </tr>
    <tr>
      <td>MNIPediatricAsym</td>
      <td>MNI's unbiased standard MRI template for pedia...</td>
      <td>[Fonov V, Evans AC, Botteron K, Almli CR, McKi...</td>
      <td>MIT-derived. See LICENSE file</td>
    </tr>
    <tr>
      <td>NKI</td>
      <td>ANTs' NKI-1 template</td>
      <td>[Avants BB, Tustison NJ, Song G, Cook PA, Klei...</td>
      <td>CC BY 4.0</td>
    </tr>
    <tr>
      <td>OASIS30ANTs</td>
      <td>OASIS30 - Generated with ANTs for MICCAI 2016</td>
      <td>[Avants BB, Tustison NJ, Song G, Cook PA, Klei...</td>
      <td>CC BY 4.0</td>
    </tr>
    <tr>
      <td>PNC</td>
      <td>Philadelphia Neurodevelopmental Cohort template</td>
      <td>[Satterthwaite TD, Connolly JJ, Ruparel K, Cal...</td>
      <td>CC BY 4.0</td>
    </tr>
    <tr>
      <td>RESILIENT</td>
      <td>Age-specific adult rat brain MRI templates and...</td>
      <td>[MacNicol, E, Wright, P, Kim, E, Brusini, I, E...</td>
      <td>CC-BY-4.0 International</td>
    </tr>
    <tr>
      <td>UNCInfant</td>
      <td>UNC Infant 0-1-2 Atlases</td>
      <td>[Feng Shi, Pew-Thian Yap, Guorong Wu, Hongjun ...</td>
      <td>CC-BY</td>
    </tr>
    <tr>
      <td>WHS</td>
      <td>Waxholm Space atlas of the Sprague Dawley rat ...</td>
      <td>[Papp EA, Leergaard TB, Calabrese E, Johnson G...</td>
      <td>CC-by-nc-sa-4.0 International</td>
    </tr>
    <tr>
      <td>fsLR</td>
      <td>HCP Pipelines' fsLR template</td>
      <td>[Tim Coalson, Matt Glasser, Mike Harms, David ...</td>
      <td>See LICENSE file</td>
    </tr>
    <tr>
      <td>fsaverage</td>
      <td>FreeSurfer's fsaverage template</td>
      <td>[]</td>
      <td>See LICENSE file</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">get_citations</span></code> method allows for easy retrieval and formatting of references. By default, the method gives DOIs for each citation, but it can also be configured to return citations in BibTeX format. (This additionally requires the <code class="docutils literal notranslate"><span class="pre">doi2bib</span></code> package.)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">tflow</span><span class="o">.</span><span class="n">get_citations</span><span class="p">(</span><span class="s1">&#39;UNCInfant&#39;</span><span class="p">,</span> <span class="n">bibtex</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
@article{2011,
        doi = {10.1371/journal.pone.0018746},
        url = {https://doi.org/10.1371%2uncinfant1.pone.0018746},
        year = 2011,
        month = {apr},
        publisher = {Public Library of Science ({PLoS})},
        volume = {6},
        number = {4},
        pages = {e18746},
        author = {Feng Shi and Pew-Thian Yap and Guorong Wu and Hongjun Jia and John H. Gilmore and Weili Lin and Dinggang Shen},
        editor = {Hitoshi Okazawa},
        title = {Infant Brain Atlases from Neonates to 1- and 2-Year-Olds}
}
</pre></div></div>
</div>
</div>
<div class="section" id="Accessing-data">
<h2>Accessing data<a class="headerlink" href="#Accessing-data" title="Permalink to this headline">¶</a></h2>
<p>To retrieve the template resources themselves, we use the <code class="docutils literal notranslate"><span class="pre">get</span></code> method. This method accepts as arguments the unique template identifier together with any BIDS-like entities: key-value pairs specifying the resource to retrieve. It returns a path to the requested resource, which can (for example) be used with <code class="docutils literal notranslate"><span class="pre">nibabel</span></code> to read the resource into memory. The table below details valid entities for the API.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Data entity</p></th>
<th class="head"><p>API query example</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Template</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;MNI152Lin&quot;</span></code></p></td>
<td><p>The template dataset to which an image or other data file belongs.</p></td>
</tr>
<tr class="row-odd"><td><p>Resolution</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">resolution=1</span></code></p></td>
<td><p>The image resolution. Each resolution is assigned a key, which is defined in the <code class="docutils literal notranslate"><span class="pre">res</span></code> field of <code class="docutils literal notranslate"><span class="pre">template_description.json</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>Mask</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">desc=&quot;brain&quot;,</span> <span class="pre">suffix=&quot;mask&quot;</span></code></p></td>
<td><p>Indicates that the image is a binary-valued annotation, where voxels labelled 1 are part of the mask.</p></td>
</tr>
<tr class="row-odd"><td><p>Discrete segmentation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">desc=&quot;malf&quot;,</span> <span class="pre">suffix=&quot;dseg&quot;</span></code></p></td>
<td><p>Indicates that the image is an integer-valued annotation. Each segmentation image file (<code class="docutils literal notranslate"><span class="pre">.nii.gz</span></code> format) is paired with a dictionary of segment names (<code class="docutils literal notranslate"><span class="pre">.tsv</span></code>
format).</p></td>
</tr>
<tr class="row-even"><td><p>Probabilistic segmentation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">label=&quot;CSF&quot;,</span> <span class="pre">suffix=&quot;probseg&quot;</span></code></p></td>
<td><p>Indicates that the image is a probabilistic annotation, wherein the value of each voxel indicates the probability of that voxel belonging to the specified label.</p></td>
</tr>
<tr class="row-odd"><td><p>Atlas</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">atlas=&quot;Schaefer&quot;,</span> <span class="pre">desc=&quot;7Network&quot;</span></code></p></td>
<td><p>The atlas to which a segmentation file belongs.</p></td>
</tr>
<tr class="row-even"><td><p>Transformation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">from=&quot;MNI152Lin&quot;,</span> <span class="pre">suffix=&quot;xfm&quot;</span></code></p></td>
<td><p>File containing a mapping between 2 stereotaxic coordinate spaces. The source space is defined in the <code class="docutils literal notranslate"><span class="pre">from</span></code> field, while the target space is defined in the
<code class="docutils literal notranslate"><span class="pre">tpl</span></code> field.</p></td>
</tr>
<tr class="row-odd"><td><p>Image modality</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">suffix=&quot;T1w&quot;</span></code></p></td>
<td><p>For non-annotation brain images, the suffix indicates whether the image is T1-weighted (<code class="docutils literal notranslate"><span class="pre">T1w</span></code>), T2-weighted (<code class="docutils literal notranslate"><span class="pre">T2w</span></code>), proton density-weighted (<code class="docutils literal notranslate"><span class="pre">PD</span></code>), or
T2*-weighted (<code class="docutils literal notranslate"><span class="pre">T2star</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>Template cohort</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cohort=1</span></code></p></td>
<td><p>Subsample of a dataset used to generate an average template.</p></td>
</tr>
</tbody>
</table>
<p><em>TemplateFlow</em> uses a lazy loading scheme for resource retrieval: at installation, the local copy of the archive tree contains only pointers to cloud-based resources. As data resources are requested (for instance using the <code class="docutils literal notranslate"><span class="pre">get</span></code> method), they are synced from the cloud to the local file system. If the data have already been downloaded, they can be retrieved from the local system cache without repeating the download.</p>
<p>As an example, we can use the <code class="docutils literal notranslate"><span class="pre">get</span></code> method to retrieve a path to the 100-node Schaefer atlas.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">tflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s1">&#39;MNI152NLin2009cAsym&#39;</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">atlas</span><span class="o">=</span><span class="s1">&#39;Schaefer2018&#39;</span><span class="p">,</span>
    <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;100Parcels7Networks&#39;</span><span class="p">,</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/Users/rastko/.cache/templateflow/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_atlas-Schaefer2018_desc-100Parcels7Networks_dseg.nii.gz
</pre></div></div>
</div>
<p>…or the T1-weighted <code class="docutils literal notranslate"><span class="pre">MNI152NLin6Asym</span></code> template.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">tflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span>
    <span class="n">desc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;T1w&quot;</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/Users/rastko/.cache/templateflow/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_T1w.nii.gz
</pre></div></div>
</div>
<p>By omitting arguments, we retrieve any data that match the remaining (specified) arguments.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">tflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;probseg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[PosixPath(&#39;/Users/rastko/.cache/templateflow/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_atlas-HOCPA_probseg.nii.gz&#39;),
 PosixPath(&#39;/Users/rastko/.cache/templateflow/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_atlas-HOCPAL_probseg.nii.gz&#39;),
 PosixPath(&#39;/Users/rastko/.cache/templateflow/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_atlas-HOSPA_probseg.nii.gz&#39;)]
</pre></div></div>
</div>
</div>
<div class="section" id="Integrating-TemplateFlow-into-processing-workflows">
<h2>Integrating <em>TemplateFlow</em> into processing workflows<a class="headerlink" href="#Integrating-TemplateFlow-into-processing-workflows" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Motivation">
<h3>Motivation<a class="headerlink" href="#Motivation" title="Permalink to this headline">¶</a></h3>
<p><em>TemplateFlow</em> maximizes the accessibility and reuse potential of templates and atlases. For example, let’s reuse the base configuration file for FSL FEAT we proposed in our paper (Esteban et al., 2019). The design file <code class="docutils literal notranslate"><span class="pre">design.fsf</span></code> specifies a simple preprocessing workflow with FSL tools. The simplified code listing below shows that, just to make non-default templates available to FSL using the graphical user interface (GUI), at least five steps are necessary:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. User determines two nondefault templates they want to spatially normalize into</span>
<span class="c1"># 2. User manually downloads templates, extracts the required files from packages</span>
$ curl -sSL &lt;url&gt; <span class="p">|</span> tar zxv --no-same-owner -C /data/templates/
<span class="c1"># 3. User opens FSL&#39;s GUI, edits the target template box content pointing to the appropriate files</span>
<span class="c1"># 4. User generates FSL configuration files to permit batch execution on the command line</span>
<span class="c1"># 5. For the default and the two nondefault templates, execute FSL&#39;s feat:</span>
$ feat design_&lt;template&gt;.fsf
</pre></div>
</div>
<p>The outputs of each <code class="docutils literal notranslate"><span class="pre">feat</span> <span class="pre">design_&lt;template&gt;.fsf</span></code> call will follow the pre-specified patterns of FSL, with whatever customization the user has introduced into the design file. The user, therefore, must then adapt the downstream analysis tools to correctly interpret the derived dataset, in each standard space, or reformat the output dataset according to the expectations of the analysis tools.</p>
<p>The user is also responsible for all aspects of provenance tracking and adequately reporting them in their communications. Information such as version of the template (or download date), citations to relevant papers, and other metadata (e.g., RRIDs) must be accounted for manually throughout the research process.</p>
<hr></div>
<div class="section" id="TemplateFlow-integration-with-fMRIPrep">
<h3><em>TemplateFlow</em> integration with <code class="docutils literal notranslate"><span class="pre">fMRIPrep</span></code><a class="headerlink" href="#TemplateFlow-integration-with-fMRIPrep" title="Permalink to this headline">¶</a></h3>
<p>In contrast, tools using <em>TemplateFlow</em> dramatically simplify the whole process (note that <code class="docutils literal notranslate"><span class="pre">MNI152NLin2009cAsym</span></code> and <code class="docutils literal notranslate"><span class="pre">OASIS30Ants</span></code> are the two templates not found within the FSL distribution, and <code class="docutils literal notranslate"><span class="pre">MNI152NLin6Asym</span></code> denotes <em>FSL’s MNI space</em> (i.e., the default FSL template):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ fmriprep /data /derivatives participant --output-spaces MNI152NLin2009cAsym MNI152NLin6Asym OASIS30Ants
</pre></div>
</div>
<p><em>fMRIPrep</em> generates the results with BIDS-Derivatives organization for the three templates. The tool also leverages <em>TemplateFlow</em> to generate a <em>boilerplate citation text</em> that includes the full names, versions and references to credit the template’s authors for each of the templates involved.</p>
<p><em>fMRIPrep</em> internally stages one spatial normalization workflow for each of the output spaces. Each of these normalization sub-workflows uses a simple line of Python code to retrieve the necessary resources from <em>TemplateFlow</em> using the <em>TemplateFlow Client</em> interface:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">tpl_ref_file</span> <span class="o">=</span> <span class="n">tflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;T1w&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tpl_ref_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/Users/rastko/.cache/templateflow/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_T1w.nii.gz
</pre></div></div>
</div>
<hr></div>
<div class="section" id="Obtaining-templates-for-registration">
<h3>Obtaining templates for registration<a class="headerlink" href="#Obtaining-templates-for-registration" title="Permalink to this headline">¶</a></h3>
<p>Outside of <code class="docutils literal notranslate"><span class="pre">fMRIPrep</span></code>, we can also use <em>TemplateFlow</em> to streamline workflows that make use of standard spatial references, including (for instance) registration and segmentation workflows. For example, we can use an inline call to the Python client to retrieve the template (or, as necessary, a mask or tissue probability map) to build a call to SyN-based ANTs registration in a short bash script:)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre>
<span></span>%%bash

<span class="nv">templates</span><span class="o">=(</span>
    MNI152NLin2009cAsym
    MNI152NLin6Asym
    OASIS30ANTs
<span class="o">)</span>

<span class="k">for</span> template <span class="k">in</span> <span class="si">${</span><span class="nv">templates</span><span class="p">[@]</span><span class="si">}</span>
    <span class="k">do</span>
    <span class="nv">template_path</span><span class="o">=</span><span class="k">$(</span>
        python -c <span class="s2">&quot;</span>
<span class="s2">import templateflow.api as tflow</span>
<span class="s2">print(tflow.get(&#39;</span><span class="si">${</span><span class="nv">template</span><span class="si">}</span><span class="s2">&#39;, desc=None, resolution=1, suffix=&#39;T1w&#39;))</span>
<span class="s2">        &quot;</span>
    <span class="k">)</span>
    <span class="nb">echo</span> antsRegistrationSyN.sh <span class="se">\</span>
        -d <span class="m">3</span> <span class="se">\</span>
        -f <span class="nv">$template_path</span> <span class="se">\</span>
        -m /data/ds-001/sub-001/ses-001/sub-001_ses-001_T1w.nii.gz <span class="se">\</span>
        -o /tmp/sub-001_ses-001_space-<span class="si">${</span><span class="nv">template</span><span class="si">}</span>_T1w
    <span class="nb">echo</span>
<span class="k">done</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
antsRegistrationSyN.sh -d 3 -f /Users/rastko/.cache/templateflow/tpl-MNI152NLin2009cAsym/tpl-MNI152NLin2009cAsym_res-01_T1w.nii.gz -m /data/ds-001/sub-001/ses-001/sub-001_ses-001_T1w.nii.gz -o /tmp/sub-001_ses-001_space-MNI152NLin2009cAsym_T1w

antsRegistrationSyN.sh -d 3 -f /Users/rastko/.cache/templateflow/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_T1w.nii.gz -m /data/ds-001/sub-001/ses-001/sub-001_ses-001_T1w.nii.gz -o /tmp/sub-001_ses-001_space-MNI152NLin6Asym_T1w

antsRegistrationSyN.sh -d 3 -f /Users/rastko/.cache/templateflow/tpl-OASIS30ANTs/tpl-OASIS30ANTs_res-01_T1w.nii.gz -m /data/ds-001/sub-001/ses-001/sub-001_ses-001_T1w.nii.gz -o /tmp/sub-001_ses-001_space-OASIS30ANTs_T1w

</pre></div></div>
</div>
<hr></div>
<div class="section" id="Masks">
<h3>Masks<a class="headerlink" href="#Masks" title="Permalink to this headline">¶</a></h3>
<p>One detail glossed over in the FSL example above is that, for a robust spatial normalization process, a precise binary mask of the brain is generally used. While FSL would require the user to manually set this mask up in the GUI, in the case of <em>TemplateFlow</em>, it requires a second minimal call:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">msk_ref_file</span> <span class="o">=</span> <span class="n">tflow</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;brain&quot;</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;mask&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msk_ref_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/Users/rastko/.cache/templateflow/tpl-MNI152NLin6Asym/tpl-MNI152NLin6Asym_res-01_desc-brain_mask.nii.gz
</pre></div></div>
</div>
<p>These examples are extreme simplifications of what a pipeline developer can automate and make more robust by integrating <em>TemplateFlow</em> in their workflows.</p>
</div>
</div>
<div class="section" id="Accessing-file-versions">
<h2>Accessing file versions<a class="headerlink" href="#Accessing-file-versions" title="Permalink to this headline">¶</a></h2>
<p><em>TemplateFlow</em> automatically tracks versions of all archived datasets and resources through <em>DataLad</em>. Currently, to access the version hashes of template resources, you must configure <em>TemplateFlow</em> to use <em>DataLad</em> for downloading files. A simple way to do this is by including <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">TEMPLATEFLOW_USE_DATALAD=1</span></code> in your <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code>. Under the hood, <em>DataLad</em> uses <code class="docutils literal notranslate"><span class="pre">git-annex</span></code>, an extension of Git designed for use with large files. Suppose we want to get the hash for the current
version of the <code class="docutils literal notranslate"><span class="pre">PNC</span></code> template. Because <em>DataLad</em> uses <code class="docutils literal notranslate"><span class="pre">git-annex</span></code>, we can simply use <code class="docutils literal notranslate"><span class="pre">git</span></code>’s native logging functionality to obtain this.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre>
<span></span>%%bash
<span class="nb">pushd</span> <span class="si">${</span><span class="nv">TEMPLATEFLOW_HOME</span><span class="si">}</span>/tpl-PNC &gt;&gt;/dev/null
git log -n <span class="m">1</span> --format<span class="o">=</span>oneline
<span class="nb">popd</span> &gt;&gt;/dev/null
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
d24b6ed7a425574e21f8b3a96bd07674a518741a maint: use templateflow/gha-workflow-superdataset script
</pre></div></div>
</div>
<p>The hash is printed at left, and a description of the most recent change synchronised locally is printed at right. Similarly, we can also retrieve the hash of the dataset version in which any particular file was most recently changed…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre>
<span></span>%%bash
<span class="nb">pushd</span> <span class="si">${</span><span class="nv">TEMPLATEFLOW_HOME</span><span class="si">}</span>/tpl-PNC &gt;&gt;/dev/null
git log -n <span class="m">1</span> --format<span class="o">=</span>oneline template_description.json
<span class="nb">popd</span> &gt;&gt;/dev/null
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
00af2f16107b7834ff49fda3019c8531c62ed833 fix: bring template description back to git
</pre></div></div>
</div>
<p>…or the recent version history of the dataset (or any of its files).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre>
<span></span>%%bash
<span class="nb">pushd</span> <span class="si">${</span><span class="nv">TEMPLATEFLOW_HOME</span><span class="si">}</span>/tpl-PNC &gt;&gt;/dev/null
git log -n <span class="m">20</span> --format<span class="o">=</span>oneline
<span class="nb">popd</span> &gt;&gt;/dev/null
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
d24b6ed7a425574e21f8b3a96bd07674a518741a maint: use templateflow/gha-workflow-superdataset script
9be4f088d62b8dbc4721da619eb4ff940ba590cb [DATALAD] Recorded changes
87525f0a0cd52305c8bf41e2a4ada5a2f1a51ef2 enh: delete annexed GH action script
1b3db15dc2f270103408c6bf1f1c7d68e90ca757 fix: update the GH actions
bd0d1fecc5577ba431ab8618ff611a48d96fbb13 chore(gh-action): add update-superdataset post-hook
2c1263afb333c3dfce5835cddbbcdee42c295c8d [DATALAD] removed content
00af2f16107b7834ff49fda3019c8531c62ed833 fix: bring template description back to git
9e3eb802134a110d07c05bdf1b56a8164777f7e7 delete: links to template descriptions
d714dac28171b971c331bca95433af9d8bb4eaf0 fix: bring template description back to git
09e5cade904f2fdf75c77442ad9a6d3a395f4cd4 fix: bring template description back to git
98abf71886e3211299bc1a2a9ef2b6a5225da31a fix: bring template descrition back to git
84ad77f765354d3d007c77982b6e1aac2c33c809 fix: amend list of Curators
a8c86be1694c1e3b8f772e0cfb1980f61a75c6c2 fix: roll all &#39;ReferencesAndLinks&#39; fields of the description back to lists
4ea613d7ef73d31e8a96945dfa9e49f7a899aa56 fix: roll all &#39;ReferencesAndLinks&#39; fields of the description back to lists
c9b410f748830ca7d732f922d096e2be942c9509 [DATALAD] added content
e56f490ba3c6d9dd66bf13021541fee70c440bbb Create LICENSE
216c9a058deadd68560b9c4b7aa9c6a03f2525f1 update template_description.json fields to be more BIDS-like
a354a2310fd5fb5aca2117c5f6f02d30fa90765d remove readme and fix version number
d8cfe43eaae14020d0f2c15a361eca4ea66d8f57 metadata and changelog
2b6ae7d2c79b976bd0ca828957ddfeeeb45879b7 [DATALAD] add files from URLs
</pre></div></div>
</div>
<p>Each hash unambiguously references a specific version of the dataset, so it can be used to ensure that collaborators use identical versions of template resources. We can use these hashes to view the dataset as it appeared at any point in its history. <a class="reference external" href="http://handbook.datalad.org/en/latest/basics/101-137-history.html#viewing-previous-versions-of-files-and-datasets">See DataLad’s documentation for more details</a>.</p>
<hr></div>
<div class="section" id="Summary">
<h2>Summary<a class="headerlink" href="#Summary" title="Permalink to this headline">¶</a></h2>
<p><em>TemplateFlow</em> makes many aspects of working with spatial standard datasets easier. Please check out the <a class="reference external" href="https://www.templateflow.org/">TemplateFlow homepage</a> and the detailed <a class="reference external" href="https://www.templateflow.org/python-client/master/index.html#">documentation hub</a> for <em>TemplateFlow</em> for further information about using the client or contributing new template resources. If you still have questions, you can ask on <a class="reference external" href="https://neurostars.org/tag/templateflow">NeuroStars</a> with the <code class="docutils literal notranslate"><span class="pre">templateflow</span></code>
tag.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="02_visualisation.html" class="btn btn-neutral float-right" title="Visualisation of spatial resources with TemplateFlow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../examples.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, The TemplateFlow developers.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: dev (0.7.2.dev31)
    <span class="fa fa-caret-down"></span>
  </span>
  <div id="version-switch" class="rst-other-versions">
    <dt id="v-tags"></dt>
    <dt id="v-branches"></dt>
  </div>
</div>

<script type="text/javascript">
$(document).ready(function() {
    var pathname = window.location.pathname;
    var cur_ver = "/master/"
    var relpath = pathname.substring(pathname.indexOf(cur_ver) + 1).replace(/\/$/, '');
    var levels = relpath.split("/").length - 1
    if ( levels == 0 ) {
        levels = 1
	relpath += "/"
    }
    var versions_file = "../".repeat(levels) + "versions.json"
    relpath = "../".repeat(levels) + relpath
    console.log(`relative path: "${relpath}"`)

    $.getJSON(versions_file, function (data) {

        $.each(data["tags"], function( i, val ) {
            $("#v-tags").append("<dd><a href=\"" + relpath.replace(cur_ver, "/" + val + "/") + "\">" + val + "</a></dd>")
        });
        $("#v-branches").append("<dd><a href=\"" + relpath.replace(cur_ver, "/" + data["tags"][data["tags"].length - 1]+ "/") + "\">latest</a></dd>")
        $("#v-branches").append("<dd><a href=\"" + relpath.replace(cur_ver, "/master/") + "\">dev</a></dd>")
    });
});
</script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>